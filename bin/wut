#!/usr/bin/env bash

set -eo pipefail

read -p 'otp ? y/n: ' ans

function f() {
  fzf --no-info --prompt=' ' -i --color=16,hl:#ffcb6b,hl+:#89ddff,fg+:#ffffff,pointer:#89ddff
}

pass="$(pass | awk '{if(NR>1)print $2}' | f)"

if [ "$ans" == "y" ]; then
  pass otp "$pass" | wl-copy -o
else
  pass "$pass" | head -n1 | wl-copy -o
fi
